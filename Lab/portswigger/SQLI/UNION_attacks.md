UNION :cho phép mình nối kết quả của hai hoặc nhiều câu truy vấn lại với nhau.<br>
Mặc định union sẽ loại bỏ kết quả trùng.<br>
UNION ALL thì nó giữ lại kết quả trùng.<br>
Điều kiện khi sử dụng union: <br>
Số lượng colums của các table  trong các câu select phải bằng nhau<br>
* [Lab: SQL injection UNION attack, determining the number of columns returned by the query](#lab1)
* [Lab: SQL injection UNION attack, finding a column containing text](#lab2)
* [Lab: SQL injection UNION attack, retrieving data from other tables](#lab3)
* [Lab: SQL injection UNION attack, retrieving multiple values in a single column](#lab4)
# Lab: SQL injection UNION attack, determining the number of columns returned by the query <a name="lab1">
Mình hay sử dụng 3 phương pháp xác định số cột:<br>
-Dùng order by<br>
-Dùng group by<br>
-Dùng UNION <br>
# Sử dụng order by
Sau khi order by 1 rùi tới 2 và tới 3
![image](https://user-images.githubusercontent.com/20487674/122632397-c0358100-d0fc-11eb-856b-9ae91c1e71f6.png)<br>
Nhưng tới order by 4 thì toang :D
![image](https://user-images.githubusercontent.com/20487674/122632424-ee1ac580-d0fc-11eb-8c1f-7d72923d0935.png)
# Sử dụng group by
Sau khi group by 1,2,3
![image](https://user-images.githubusercontent.com/20487674/122632480-405be680-d0fd-11eb-874b-c2e1e1b093b3.png)<br>
group by 1,2,3,4
![image](https://user-images.githubusercontent.com/20487674/122632502-64b7c300-d0fd-11eb-8e97-19736de80420.png)
# Sử dụng union
![image](https://user-images.githubusercontent.com/20487674/122632530-8a44cc80-d0fd-11eb-93c0-32c4d960e38b.png)
Sửa lại union select null,null,null--
![image](https://user-images.githubusercontent.com/20487674/122632561-ad6f7c00-d0fd-11eb-8e00-5df6cf74c61e.png)
Thử union select null,null,null,null--(4 null)
![image](https://user-images.githubusercontent.com/20487674/122632573-db54c080-d0fd-11eb-850e-a8ecb7b7d280.png)
# Lab: SQL injection UNION attack, finding a column containing text <a name="lab2">
  Thì lab tiếp theo nối tiếp lab trước là yêu cầu mình xác định các cột mà câu truy vấn select phía trước đang chọn<br>
  Thường thì mình hay kèm trong payload điều kiện sai để xuất các cột mà câu truy vấn select phía trước đang chọn<br>
  Test thử payload: '+and+false+union+select+null,null,null--+-
  ![image](https://user-images.githubusercontent.com/20487674/122632836-84e88180-d0ff-11eb-8c0f-7a27c830b34a.png)<br>
  Thì bruteforce từng cột:
  ![image](https://user-images.githubusercontent.com/20487674/122632888-c7aa5980-d0ff-11eb-8236-63b4d51f8e0e.png)<br>
  Tới thì xác định câu select ở phía trước đang select cột thứ 2
  ![image](https://user-images.githubusercontent.com/20487674/122632916-e6a8eb80-d0ff-11eb-8e56-ef3bc367dfab.png)
# Lab: SQL injection UNION attack, retrieving data from other tables <a name="lab3">
  Thì này yêu cầu chúng ta truy xuất dữ liệu hai cột username và password ở bảng users.<br>
  Như cách lab kia thì lab này ta phải xác định số lượng cột và các cột nào mà câu select phía trước đang truy xuất.<br>
  Thì ở đây mình xác định trước có 2 cột
  ![image](https://user-images.githubusercontent.com/20487674/122633137-245a4400-d101-11eb-8e73-ff5e4e3fc124.png)<br>
  Vài câu select phía trước đang truy vấn cột thứ nhất và thứ hai
  ![image](https://user-images.githubusercontent.com/20487674/122633252-c11ce180-d101-11eb-8a7c-0f40d0db2537.png)<br>
  Tiếp đến truy xuất dữ liệu:  '+union+select+concat_ws(' | ',username,password),null+from+users--+- và lấy username,password admin login  hoàn thành lab
  ![image](https://user-images.githubusercontent.com/20487674/122633330-3f798380-d102-11eb-8c49-ff8ca0feb1b1.png)
# Lab: SQL injection UNION attack, retrieving multiple values in a single column <a name="lab4">
  Lab này yêu cầu chúng ta truy xuất tất cả dữ liệu ở một cột,đầu tiên ta phải thực các bước ở lab trước<br>
  Do lab này mình không biết nó xài dbms gì nên quay lại phần lý thuyết coi: https://portswigger.net/web-security/sql-injection/cheat-sheet<br>
  Sau khi thử các cách nối chuỗi chỉ cách nỗi chuỗi Oracle là có tác dụng: %27+union+select+null,username+||+%27|%27+||+password+from+users--+-<br>
  Thì giữa username và password ngăn cách bằng dấu |
  ![image](https://user-images.githubusercontent.com/20487674/122633789-93856780-d104-11eb-8efe-372b598fd192.png)

  
  

  












